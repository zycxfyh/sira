# AI Gateway - 智能API网关项目

## 🌟 项目简介

**AI Gateway** 是一个基于 Express Gateway 构建的智能AI API网关系统，为AI应用开发提供统一、高效、安全的API管理解决方案。

该项目由学生开发者创建，集成了Kong API Gateway、NATS消息队列、Prometheus监控栈等先进技术栈，实现AI服务的智能路由、缓存、熔断、限流等企业级功能。

## ⚠️ 重要提醒

**这是一个学生学习项目**，请在使用前仔细阅读 [免责声明](DISCLAIMER.md)。

## 🚀 核心特性

- **智能路由**: 基于成本、性能和可用性自动选择最佳AI提供商
- **多级缓存**: L1内存缓存 + L2 Redis缓存，提升响应速度
- **企业级安全**: API密钥认证、速率限制、熔断保护
- **异步处理**: 大型请求的队列处理和Webhook回调
- **完整监控**: Prometheus + Grafana + Jaeger分布式追踪
- **测试工作流**: 9阶段完整CI/CD测试流程

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                    客户端请求 (HTTP/HTTPS)                      │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    Kong API Gateway                          │
│   ┌─────────────────────────────────────────────────────┐   │
│   │    AI策略插件: ai-rate-limit, ai-circuit-breaker,    │   │
│   │             ai-cache, ai-tracing, ai-queue          │   │
│   └─────────────────────────────────────────────────────┘   │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                 Express Gateway (AI处理层)                     │
│   ┌─────────────────────────────────────────────────────┐   │
│   │  AI Router: 智能路由到不同AI提供商                      │   │
│   │   ├─ OpenAI (GPT-4, GPT-3.5-turbo)                   │   │
│   │   ├─ Anthropic (Claude-3)                            │   │
│   │   └─ Azure OpenAI                                    │   │
│   └─────────────────────────────────────────────────────┘   │
│                                                             │
│   多级缓存系统 + 批量请求处理 + AI服务集成                      │
└─────────────────────────┬───────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                   NATS消息队列                               │
│   ┌─────────────────────────────────────────────────────┐   │
│   │  JetStream: 异步AI请求处理，Webhook回调，状态查询        │   │
│   └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘

可观测性栈: Prometheus + Grafana + Jaeger + Loki + AlertManager
```

## 📦 快速开始

### 方式1: 使用Docker (推荐)

```bash
# 启动完整生产环境
cd docker/production
docker-compose -f docker-compose-full.yml up -d

# 查看启动状态
docker-compose -f docker-compose-full.yml ps
```

### 方式2: 本地开发

```bash
# 克隆项目
git clone <repository-url>
cd ai-gateway

# 安装依赖
npm install

# 配置环境变量
cp env.template .env
# 编辑 .env 文件，添加你的API密钥

# 启动服务
npm run start:ai
```

## 📚 文档导航

- **[AI Gateway 使用指南](ai-gateway/README-AI.md)** - 详细的API使用说明和配置指南
- **[高级集成架构](ai-gateway/README-INTEGRATIONS.md)** - 技术架构和集成方案详解
- **[部署指南](ai-gateway/DEPLOYMENT-GUIDE.md)** - 生产环境部署和运维指南
- **[免责声明](DISCLAIMER.md)** - 项目使用条款和免责声明

## 🧪 测试验证

项目已通过完整的9阶段测试工作流：

1. ✅ 本地验证环境 - 依赖安装和配置检查
2. ✅ 自动化测试 - ESLint代码检查和单元测试
3. ✅ 静态安全检查 - npm audit和安全扫描
4. ✅ 集成测试 - 多组件协作测试
5. ✅ PR审核流程 - 自动代码审查
6. ✅ Staging部署 - Docker容器化部署
7. ✅ 回归测试 - 历史功能验证
8. ✅ 生产部署 - 生产环境配置验证
9. ✅ 监控回溯 - 系统监控和告警检查

## 🎯 项目成果

- **20个问题修复**: 安全漏洞、配置错误、性能优化
- **6个AI策略**: 路由、缓存、限流、熔断、追踪、队列处理
- **多架构集成**: Kong + Express Gateway + NATS + OpenTelemetry
- **企业级部署**: 高可用性、生产就绪配置

## 🤝 贡献与交流

欢迎对项目感兴趣的同学一起学习和交流！

- 📧 **邮箱**: 1666384464@qq.com
- 📱 **电话**: 17855398215
- 🐛 **Issues**: 技术问题讨论和功能建议
- 📖 **学习分享**: 一起探讨技术实现和最佳实践

## 📄 许可证

本项目采用 Apache License 2.0 许可证。

---

**学生开发者作品** | **学习驱动创新** | **技术分享价值**

*最后更新: 2025年11月7日*
