# 文件路径: apps/frontend/nginx.conf
# 职责: 为前端单页面应用（SPA）提供生产级的Nginx配置。

server {
  # 监听标准的 HTTP 端口
  listen 80;
  
  # 设置服务器根目录，指向我们即将复制进来的 dist 文件夹
  root /usr/share/nginx/html;
  
  # 默认索引文件
  index index.html;

  # 核心配置：处理 SPA 路由
  # 尝试按顺序查找文件:
  # 1. $uri: 客户端请求的URI（例如 /assets/main.css）
  # 2. $uri/: 如果请求的是一个目录（例如 /images/）
  # 3. /index.html: 如果以上都找不到，则回退到 index.html
  # 这确保了无论用户访问哪个前端路由（/nexus, /game/123），
  # 最终都会由 index.html 来处理，交由 Vue Router接管。
  location / {
    try_files $uri $uri/ /index.html;
  }

  # 优化：为静态资源设置长缓存时间
  location ~* \.(?:css|js|jpg|jpeg|gif|png|ico|svg|woff|woff2)$ {
    expires 1y;
    add_header Cache-Control "public";
  }
}