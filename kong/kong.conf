# Kong configuration for Sira

# Database
database = postgres
pg_host = kong-database
pg_port = 5432
pg_user = kong
pg_password = kongpass
pg_database = kong
pg_ssl = off

# PostgreSQL Connection Pool
pg_max_conns_per_worker = 10
pg_semaphore_timeout = 60000
pg_keepalive_timeout = 60000
pg_pool_size = 5
pg_backlog = 20

# Network
admin_listen = 0.0.0.0:8001
proxy_listen = 0.0.0.0:8000

# SSL (if certificates are available)
#ssl_cert = /usr/local/kong/ssl/tls.crt
#ssl_cert_key = /usr/local/kong/ssl/tls.key

# Plugins (order matters for dependencies)
# 1. Authentication plugins (must be first)
# 2. Traffic control plugins (rate limiting, circuit breaker)
# 3. AI-specific plugins (router, cache, tracing)
# 4. Monitoring plugins (prometheus)
plugins = bundled
