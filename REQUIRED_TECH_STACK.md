# Sira AI Gateway - å¿…éœ€æŠ€æœ¯æ ˆåˆ†æ

**æœ€åæ›´æ–°**: 2025å¹´11æœˆ9æ—¥  
**åˆ†æäººå‘˜**: Industrial Software Engineering Agent

---

## ğŸ“‹ ç›®å½•

- [ğŸ”´ æ ¸å¿ƒå¿…éœ€](#-æ ¸å¿ƒå¿…éœ€)
- [ğŸŸ¡ æ¨èå¿…éœ€](#-æ¨èå¿…éœ€)
- [ğŸŸ¢ å¯é€‰å¢å¼º](#-å¯é€‰å¢å¼º)
- [ğŸ› ï¸ å¼€å‘å·¥å…·](#ï¸-å¼€å‘å·¥å…·)
- [ğŸš€ éƒ¨ç½²å·¥å…·](#-éƒ¨ç½²å·¥å…·)
- [ğŸ“Š ä¼˜å…ˆçº§çŸ©é˜µ](#-ä¼˜å…ˆçº§çŸ©é˜µ)

---

## ğŸ”´ æ ¸å¿ƒå¿…éœ€

è¿™äº›æ˜¯é¡¹ç›®è¿è¡Œçš„åŸºæœ¬è¦æ±‚ï¼Œç¼ºå°‘ä»»ä¸€é¡¹éƒ½æ— æ³•å¯åŠ¨ã€‚

### 1. **è¿è¡Œæ—¶ç¯å¢ƒ** âš ï¸

| æŠ€æœ¯         | ç‰ˆæœ¬     | å¿…éœ€ç¨‹åº¦    | åŸå›                                 |
| ------------ | -------- | ----------- | ----------------------------------- |
| **Node.js**  | â‰¥ 18.0.0 | ğŸ”´ **å¼ºåˆ¶** | é¡¹ç›®æ ¸å¿ƒè¿è¡Œæ—¶ï¼Œæ‰€æœ‰ä»£ç åŸºäºNode.js |
| **npm/pnpm** | â‰¥ 8.0.0  | ğŸ”´ **å¼ºåˆ¶** | åŒ…ç®¡ç†å’Œè„šæœ¬è¿è¡Œ                    |

**éªŒè¯**: `node --version && npm --version`

### 2. **æ ¸å¿ƒæ¡†æ¶** âš ï¸

| æŠ€æœ¯           | ç‰ˆæœ¬    | å¿…éœ€ç¨‹åº¦    | åŸå›                          |
| -------------- | ------- | ----------- | ---------------------------- |
| **Express.js** | ^4.17.1 | ğŸ”´ **å¼ºåˆ¶** | HTTPæœåŠ¡å™¨æ¡†æ¶ï¼Œæ ¸å¿ƒç½‘ç»œåŠŸèƒ½ |
| **http-proxy** | ^1.18.0 | ğŸ”´ **å¼ºåˆ¶** | ä»£ç†åŠŸèƒ½ï¼ŒAIæœåŠ¡è½¬å‘         |

**éªŒè¯**: `npm list express http-proxy`

### 3. **è®¤è¯ä¸å®‰å…¨** âš ï¸

| æŠ€æœ¯             | ç‰ˆæœ¬   | å¿…éœ€ç¨‹åº¦    | åŸå›                      |
| ---------------- | ------ | ----------- | ------------------------ |
| **jsonwebtoken** | ^9.0.2 | ğŸ”´ **å¼ºåˆ¶** | JWTä»¤ç‰Œå¤„ç†              |
| **bcryptjs**     | ^2.4.3 | ğŸ”´ **å¼ºåˆ¶** | å¯†ç å“ˆå¸Œ                 |
| **helmet**       | ^8.1.0 | ğŸ”´ **å¼ºåˆ¶** | å®‰å…¨å¤´è®¾ç½®ï¼Œé˜²æ­¢å¸¸è§æ”»å‡» |
| **passport**     | ^0.7.0 | ğŸ”´ **å¼ºåˆ¶** | è®¤è¯æ¡†æ¶                 |

**éªŒè¯**: `npm list jsonwebtoken bcryptjs helmet passport`

### 4. **é…ç½®ç®¡ç†** âš ï¸

| æŠ€æœ¯         | ç‰ˆæœ¬    | å¿…éœ€ç¨‹åº¦    | åŸå›                  |
| ------------ | ------- | ----------- | -------------------- |
| **js-yaml**  | ^3.13.1 | ğŸ”´ **å¼ºåˆ¶** | YAMLé…ç½®æ–‡ä»¶è§£æ     |
| **chokidar** | ^3.0.2  | ğŸ”´ **å¼ºåˆ¶** | æ–‡ä»¶ç›‘æ§ï¼Œé…ç½®çƒ­é‡è½½ |

**éªŒè¯**: `npm list js-yaml chokidar`

---

## ğŸŸ¡ æ¨èå¿…éœ€

è¿™äº›æŠ€æœ¯ä¸æ˜¯ç»å¯¹å¿…éœ€ï¼Œä½†å¼ºçƒˆå»ºè®®ä½¿ç”¨ï¼Œä»¥ç¡®ä¿æœ€ä½³æ€§èƒ½å’ŒåŠŸèƒ½ã€‚

### 1. **ç¼“å­˜ä¸å­˜å‚¨** ğŸ’¾

| æŠ€æœ¯        | ç‰ˆæœ¬    | å¿…éœ€ç¨‹åº¦    | åŸå›                      |
| ----------- | ------- | ----------- | ------------------------ |
| **Redis**   | ^4.14.0 | ğŸŸ¡ **æ¨è** | ç¼“å­˜ã€ä¼šè¯å­˜å‚¨ã€åˆ†å¸ƒå¼é” |
| **ioredis** | ^4.14.0 | ğŸŸ¡ **æ¨è** | Rediså®¢æˆ·ç«¯              |

**æ›¿ä»£æ–¹æ¡ˆ**: æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
**éªŒè¯**: `redis-server --version` (å¦‚æœ‰)

### 2. **API æ–‡æ¡£ä¸éªŒè¯** ğŸ“

| æŠ€æœ¯                       | ç‰ˆæœ¬    | å¿…éœ€ç¨‹åº¦    | åŸå›              |
| -------------------------- | ------- | ----------- | ---------------- |
| **ajv**                    | ^6.10.2 | ğŸŸ¡ **æ¨è** | JSON Schema éªŒè¯ |
| **json-schema-ref-parser** | ^7.1.1  | ğŸŸ¡ **æ¨è** | Schema å¼•ç”¨è§£æ  |

**éªŒè¯**: `npm list ajv json-schema-ref-parser`

### 3. **ç›‘æ§ä¸æ—¥å¿—** ğŸ“Š

| æŠ€æœ¯                   | ç‰ˆæœ¬   | å¿…éœ€ç¨‹åº¦    | åŸå›      |
| ---------------------- | ------ | ----------- | -------- |
| **winston**            | 3.2.1  | ğŸŸ¡ **æ¨è** | æ—¥å¿—ç³»ç»Ÿ |
| **@opentelemetry/api** | ^1.4.1 | ğŸŸ¡ **æ¨è** | å¯è§‚æµ‹æ€§ |

**éªŒè¯**: `npm list winston @opentelemetry/api`

---

## ğŸŸ¢ å¯é€‰å¢å¼º

è¿™äº›æŠ€æœ¯æä¾›äº†é¢å¤–åŠŸèƒ½ï¼Œä½†ä¸æ˜¯æ ¸å¿ƒéœ€æ±‚ã€‚

### 1. **æ€§èƒ½ä¼˜åŒ–** âš¡

| æŠ€æœ¯                   | ç‰ˆæœ¬    | å¿…éœ€ç¨‹åº¦    | åŸå›      |
| ---------------------- | ------- | ----------- | -------- |
| **express-rate-limit** | ^2.14.2 | ğŸŸ¢ **å¯é€‰** | é€Ÿç‡é™åˆ¶ |
| **opossum**            | ^8.1.0  | ğŸŸ¢ **å¯é€‰** | ç†”æ–­å™¨   |
| **fuse.js**            | 7.1.0   | ğŸŸ¢ **å¯é€‰** | æ¨¡ç³Šæœç´¢ |

### 2. **é«˜çº§åŠŸèƒ½** ğŸš€

| æŠ€æœ¯       | ç‰ˆæœ¬    | å¿…éœ€ç¨‹åº¦    | åŸå›      |
| ---------- | ------- | ----------- | -------- |
| **nats**   | ^2.17.0 | ğŸŸ¢ **å¯é€‰** | æ¶ˆæ¯é˜Ÿåˆ— |
| **multer** | ^2.0.2  | ğŸŸ¢ **å¯é€‰** | æ–‡ä»¶ä¸Šä¼  |
| **ejs**    | ^3.1.10 | ğŸŸ¢ **å¯é€‰** | æ¨¡æ¿å¼•æ“ |

### 3. **å¼€å‘ä¾¿åˆ©** ğŸ› ï¸

| æŠ€æœ¯       | ç‰ˆæœ¬   | å¿…éœ€ç¨‹åº¦    | åŸå›      |
| ---------- | ------ | ----------- | -------- |
| **cors**   | ^2.8.5 | ğŸŸ¢ **å¯é€‰** | è·¨åŸŸæ”¯æŒ |
| **semver** | ^6.3.0 | ğŸŸ¢ **å¯é€‰** | ç‰ˆæœ¬ç®¡ç† |

---

## ğŸ› ï¸ å¼€å‘å·¥å…·

### å¿…é¡»çš„å¼€å‘å·¥å…·

| å·¥å…·                     | å¿…éœ€ç¨‹åº¦    | åŸå›      |
| ------------------------ | ----------- | -------- |
| **Git**                  | ğŸ”´ **å¼ºåˆ¶** | ç‰ˆæœ¬æ§åˆ¶ |
| **VS Code** æˆ–å…¶ä»–ç¼–è¾‘å™¨ | ğŸ”´ **å¼ºåˆ¶** | ä»£ç ç¼–è¾‘ |
| **Postman/Insomnia**     | ğŸŸ¡ **æ¨è** | APIæµ‹è¯•  |

### æµ‹è¯•å·¥å…·

| å·¥å…·          | å¿…éœ€ç¨‹åº¦    | åŸå›                |
| ------------- | ----------- | ------------------ |
| **Jest**      | ğŸ”´ **å¼ºåˆ¶** | å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• |
| **Supertest** | ğŸ”´ **å¼ºåˆ¶** | HTTP APIæµ‹è¯•       |

### ä»£ç è´¨é‡å·¥å…·

| å·¥å…·         | å¿…éœ€ç¨‹åº¦    | åŸå›                 |
| ------------ | ----------- | ------------------- |
| **ESLint**   | ğŸ”´ **å¼ºåˆ¶** | ä»£ç æ£€æŸ¥            |
| **Prettier** | ğŸ”´ **å¼ºåˆ¶** | ä»£ç æ ¼å¼åŒ–          |
| **Husky**    | ğŸŸ¡ **æ¨è** | Gité’©å­ï¼Œæäº¤å‰æ£€æŸ¥ |

---

## ğŸš€ éƒ¨ç½²å·¥å…·

### å®¹å™¨åŒ– (æ¨è)

| å·¥å…·               | å¿…éœ€ç¨‹åº¦    | åŸå›        |
| ------------------ | ----------- | ---------- |
| **Docker**         | ğŸŸ¡ **æ¨è** | å®¹å™¨åŒ–éƒ¨ç½² |
| **Docker Compose** | ğŸŸ¡ **æ¨è** | å¤šæœåŠ¡ç¼–æ’ |

**éªŒè¯**: `docker --version && docker-compose --version`

### ç›‘æ§å’Œæ—¥å¿—

| å·¥å…·           | å¿…éœ€ç¨‹åº¦    | åŸå›        |
| -------------- | ----------- | ---------- |
| **Prometheus** | ğŸŸ¢ **å¯é€‰** | æŒ‡æ ‡æ”¶é›†   |
| **Grafana**    | ğŸŸ¢ **å¯é€‰** | å¯è§†åŒ–ç›‘æ§ |
| **Loki**       | ğŸŸ¢ **å¯é€‰** | æ—¥å¿—èšåˆ   |

---

## ğŸ“Š ä¼˜å…ˆçº§çŸ©é˜µ

### æ ¸å¿ƒåŠŸèƒ½çŸ©é˜µ

```
ä¼˜å…ˆçº§ | åŠŸèƒ½æ¨¡å— | å¿…éœ€æŠ€æœ¯ | å½±å“ç¨‹åº¦
-------|----------|----------|----------
ğŸ”´ P0 | åŸºç¡€è¿è¡Œ | Node.js, Express, http-proxy | æ— æ³•å¯åŠ¨
ğŸ”´ P0 | è®¤è¯æˆæƒ | JWT, Passport, Helmet | å®‰å…¨é£é™©
ğŸŸ¡ P1 | é…ç½®ç®¡ç† | js-yaml, chokidar | é…ç½®æ— æ³•åŠ è½½
ğŸŸ¡ P1 | ç¼“å­˜å­˜å‚¨ | Redis/ioredis | æ€§èƒ½ä¸‹é™
ğŸŸ¢ P2 | ç›‘æ§æ—¥å¿— | Winston, OpenTelemetry | å¯è§‚æµ‹æ€§ç¼ºå¤±
ğŸŸ¢ P2 | æ€§èƒ½ä¼˜åŒ– | Rate-limit, Circuit Breaker | é«˜è´Ÿè½½æ—¶ä¸ç¨³å®š
```

### å¼€å‘ç¯å¢ƒçŸ©é˜µ

```
ç¯å¢ƒ | å¿…éœ€å·¥å…· | åŸå› 
------|----------|------
å¼€å‘ | Git, Node.js, Jest | åŸºæœ¬å¼€å‘
æµ‹è¯• | ESLint, Prettier | ä»£ç è´¨é‡
éƒ¨ç½² | Docker, Docker Compose | å®¹å™¨åŒ–
ç›‘æ§ | Prometheus, Grafana | ç”Ÿäº§å¯è§‚æµ‹æ€§
```

---

## âš¡ å¿«é€Ÿå¯åŠ¨æ£€æŸ¥æ¸…å•

### æœ€ä½è¦æ±‚ (èƒ½è¿è¡Œ)

```bash
# 1. æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version  # åº” >= 18.0.0

# 2. å®‰è£…ä¾èµ–
npm install

# 3. éªŒè¯æ ¸å¿ƒåŒ…
npm list express http-proxy jsonwebtoken helmet

# 4. å¯åŠ¨ç½‘å…³
npm start
```

### æ¨èé…ç½® (ç”Ÿäº§å°±ç»ª)

```bash
# 1. å®‰è£…Redis
redis-server --version

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# 3. è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
npm test

# 4. ä½¿ç”¨Dockeréƒ¨ç½²
docker-compose up -d
```

### å®Œæ•´å¼€å‘ç¯å¢ƒ

```bash
# 1. ä»£ç è´¨é‡å·¥å…·
npm run lint
npm run format

# 2. æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# 3. æ€§èƒ½æµ‹è¯•
npm run test:performance

# 4. å®‰å…¨å®¡è®¡
npm audit
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: é¡¹ç›®æ— æ³•å¯åŠ¨**
A: æ£€æŸ¥ Node.js ç‰ˆæœ¬å’Œæ ¸å¿ƒä¾èµ–æ˜¯å¦å®‰è£…

**Q: æµ‹è¯•å¤±è´¥**
A: è¿è¡Œ `npm install` é‡æ–°å®‰è£…ä¾èµ–

**Q: Dockeræ„å»ºå¤±è´¥**
A: ç¡®ä¿ Dockerfile ä¸­çš„ Node.js ç‰ˆæœ¬æ­£ç¡®

**Q: æ€§èƒ½é—®é¢˜**
A: é…ç½® Redis ç¼“å­˜ï¼Œå¯ç”¨æ€§èƒ½ç›‘æ§

### ä¾èµ–å†²çªè§£å†³æ–¹æ¡ˆ

```bash
# æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install --legacy-peer-deps

# æˆ–ä½¿ç”¨ pnpm (æ¨è)
pnpm install
```

---

## ğŸ“ˆ æŠ€æœ¯æ ˆæ¼”è¿›

### å½“å‰ç‰ˆæœ¬ (v2.0.0)

- âœ… Node.js + Express åŸºç¡€æ¶æ„
- âœ… JWT + Passport è®¤è¯
- âœ… Redis ç¼“å­˜æ”¯æŒ
- âœ… Docker å®¹å™¨åŒ–

### æœªæ¥è§„åˆ’

- ğŸ”„ Node.js 20+ å‡çº§
- ğŸ”„ TypeScript è¿ç§»
- ğŸ”„ Kubernetes ç¼–æ’
- ğŸ”„ Service Mesh (Istio)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¯¹æŠ€æœ¯æ ˆçš„è¦æ±‚

1. **ä¿æŒå‘åå…¼å®¹**: æ–°åŠŸèƒ½ä¸èƒ½ç ´åç°æœ‰API
2. **æœ€å°ä¾èµ–åŸåˆ™**: åªæ·»åŠ çœŸæ­£éœ€è¦çš„ä¾èµ–
3. **æ€§èƒ½ä¼˜å…ˆ**: æ–°æŠ€æœ¯å¿…é¡»é€šè¿‡æ€§èƒ½åŸºå‡†æµ‹è¯•
4. **å®‰å…¨ç¬¬ä¸€**: æ‰€æœ‰æ–°ä¾èµ–å¿…é¡»é€šè¿‡å®‰å…¨å®¡è®¡

### æ·»åŠ æ–°ä¾èµ–çš„æµç¨‹

1. **è¯„ä¼°éœ€æ±‚**: æ˜¯å¦çœŸçš„éœ€è¦ï¼Ÿç°æœ‰æ–¹æ¡ˆèƒ½å¦æ»¡è¶³ï¼Ÿ
2. **å®‰å…¨æ£€æŸ¥**: `npm audit` å’Œæ‰‹åŠ¨å®¡æŸ¥
3. **æµ‹è¯•éªŒè¯**: æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
4. **æ–‡æ¡£æ›´æ–°**: æ›´æ–°æ­¤æŠ€æœ¯æ ˆæ–‡æ¡£
5. **ä»£ç å®¡æŸ¥**: è‡³å°‘ä¸€äººå®¡æ ¸é€šè¿‡

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£**: [TESTING_GUIDE.md](./TESTING_GUIDE.md)
- **é—®é¢˜**: [GitHub Issues](https://github.com/zycxfyh/sira/issues)
- **è®¨è®º**: [GitHub Discussions](https://github.com/zycxfyh/sira/discussions)

---

**æŠ€æœ¯æ ˆçŠ¶æ€**: âœ… æ ¸å¿ƒå¿…éœ€å·²æ»¡è¶³  
**æ›´æ–°é¢‘ç‡**: éšç‰ˆæœ¬æ›´æ–°  
**ç»´æŠ¤è€…**: Sira Development Team
