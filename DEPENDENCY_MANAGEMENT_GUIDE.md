# ğŸ“¦ ä¾èµ–ç®¡ç†æŒ‡å—

## ğŸ¯ ä¾èµ–ç®¡ç†ç­–ç•¥

Sira AI Gatewayé‡‡ç”¨æ ‡å‡†åŒ–çš„ä¾èµ–ç®¡ç†ç­–ç•¥ï¼Œç¡®ä¿é¡¹ç›®çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## ğŸ“‹ ç‰ˆæœ¬ç­–ç•¥

### æ ¸å¿ƒä¾èµ– (Production Dependencies)
**ç­–ç•¥**: ä½¿ç”¨å›ºå®šç‰ˆæœ¬ (Pinned Versions)

**åŸå› **:
- ä¿è¯ç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§å’Œç¨³å®šæ€§
- é¿å…æ„å¤–çš„ç ´åæ€§å˜æ›´
- ä¾¿äºé—®é¢˜æ’æŸ¥å’Œå›æ»š

**æ ¼å¼**: `"package-name": "x.y.z"`

**ç¤ºä¾‹**:
```json
{
  "dependencies": {
    "express": "4.21.2",
    "axios": "1.13.2",
    "cors": "2.8.5",
    "helmet": "8.1.0",
    "ioredis": "4.14.0",
    "jsonwebtoken": "9.0.2",
    "winston": "3.2.1"
  }
}
```

### å¼€å‘ä¾èµ– (Dev Dependencies)
**ç­–ç•¥**: ä½¿ç”¨å…¼å®¹æ€§èŒƒå›´ (Caret Ranges)

**åŸå› **:
- å…è®¸è‡ªåŠ¨è·å–è¡¥ä¸æ›´æ–°å’Œbugä¿®å¤
- ä¿æŒå¼€å‘ç¯å¢ƒçš„çµæ´»æ€§
- åˆ©ç”¨æ–°åŠŸèƒ½å’Œæ€§èƒ½æ”¹è¿›

**æ ¼å¼**: `"package-name": "^x.y.z"`

**ç¤ºä¾‹**:
```json
{
  "devDependencies": {
    "@babel/core": "^7.28.5",
    "@babel/preset-env": "^7.28.5",
    "@types/express": "^4.17.1",
    "@types/jest": "^29.5.8",
    "eslint": "^8.57.1",
    "jest": "^29.7.0",
    "prettier": "^3.6.2"
  }
}
```

## ğŸ”„ ä¾èµ–æ›´æ–°æµç¨‹

### å®šæœŸæ›´æ–°æ£€æŸ¥
```bash
# æ£€æŸ¥è¿‡æ—¶çš„ä¾èµ–
npm outdated

# æŸ¥çœ‹è¯¦ç»†çš„æ›´æ–°ä¿¡æ¯
npm outdated --long
```

### å®‰å…¨æ›´æ–°
```bash
# æ£€æŸ¥å®‰å…¨æ¼æ´
npm audit

# ä¿®å¤å®‰å…¨æ¼æ´
npm audit fix

# å¼ºåˆ¶ä¿®å¤ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
npm audit fix --force
```

### ä¾èµ–å‡çº§
```bash
# å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
npm update

# å‡çº§ç‰¹å®šåŒ…
npm update package-name

# å‡çº§åˆ°æœ€æ–°ä¸»ç‰ˆæœ¬ï¼ˆç ´åæ€§å˜æ›´ï¼‰
npm install package-name@latest
```

## ğŸ›¡ï¸ å®‰å…¨ç­–ç•¥

### å®‰å…¨æ‰«æ
- **è‡ªåŠ¨åŒ–**: GitHub Actionsé›†æˆnpm audit
- **é¢‘ç‡**: æ¯æ¬¡æäº¤å’Œæ¯æ—¥å®šæ—¶æ£€æŸ¥
- **å‘Šè­¦**: å‘ç°é«˜å±æ¼æ´ç«‹å³é€šçŸ¥

### æ¼æ´å“åº”
1. **è¯„ä¼°é£é™©**: ç¡®å®šæ¼æ´å½±å“ç¨‹åº¦
2. **æŸ¥æ‰¾ä¿®å¤**: æ£€æŸ¥å®˜æ–¹ä¿®å¤ç‰ˆæœ¬
3. **æµ‹è¯•ä¿®å¤**: åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ä¿®å¤
4. **éƒ¨ç½²æ›´æ–°**: ç”Ÿäº§ç¯å¢ƒå®‰å…¨éƒ¨ç½²

### å®‰å…¨ä¾èµ–åŸåˆ™
- ä¼˜å…ˆé€‰æ‹©ç»´æŠ¤æ´»è·ƒçš„é¡¹ç›®
- å®šæœŸæ£€æŸ¥ä¾èµ–çš„æ›´æ–°é¢‘ç‡
- é¿å…ä½¿ç”¨æœ‰å·²çŸ¥å®‰å…¨é—®é¢˜çš„åŒ…
- ç›‘æ§ä¸Šæ¸¸é¡¹ç›®çš„å®‰å…¨å…¬å‘Š

## ğŸ“Š ä¾èµ–åˆ†æ

### ä¾èµ–æ ‘åˆ†æ
```bash
# æŸ¥çœ‹ä¾èµ–æ ‘
npm ls

# æŸ¥çœ‹ç‰¹å®šåŒ…çš„ä¾èµ–
npm ls package-name

# ç”Ÿæˆä¾èµ–æ ‘æ–‡ä»¶
npm ls --json > dependencies.json
```

### åŒ…å¤§å°åˆ†æ
```bash
# åˆ†æåŒ…å¤§å°
npx webpack-bundle-analyzer

# æˆ–ä½¿ç”¨å…¶ä»–å·¥å…·
npx bundle-analyzer build/static/js/*.js
```

### é‡å¤ä¾èµ–æ£€æŸ¥
```bash
# æ£€æŸ¥é‡å¤ä¾èµ–
npm ls --depth=0 | grep "deduped"

# ä½¿ç”¨å·¥å…·æ£€æµ‹
npx depcheck
```

## ğŸ”§ ä¾èµ–ç®¡ç†å·¥å…·

### Renovate
**ç”¨é€”**: è‡ªåŠ¨åŒ–ä¾èµ–æ›´æ–°

**é…ç½®**: `renovate.json`
```json
{
  "extends": [
    "config:base",
    ":dependencyDashboard",
    ":semanticPrefixFixDepsChoreOthers",
    "group:monorepos",
    "group:recommended"
  ],
  "schedule": ["before 4am on Monday"],
  "timezone": "Asia/Shanghai",
  "labels": ["dependencies"],
  "assignees": ["@sira-ai-gateway/maintainers"]
}
```

### Dependabot
**ç”¨é€”**: GitHubåŸç”Ÿä¾èµ–æ›´æ–°

**é…ç½®**: `.github/dependabot.yml`
```yaml
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 10
    reviewers:
      - "sira-ai-gateway/maintainers"
    assignees:
      - "sira-ai-gateway/maintainers"
    commit-message:
      prefix: "chore"
      prefix-development: "chore"
      include: "scope"
```

### Bundle Analyzer
**ç”¨é€”**: åˆ†ææ‰“åŒ…å¤§å°

**ä½¿ç”¨**:
```bash
# Webpack Bundle Analyzer
npm install --save-dev webpack-bundle-analyzer

# æ·»åŠ åˆ°package.json scripts
"analyze": "webpack-bundle-analyzer build/static/js/*.js"
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### åŒ…å¤§å°ä¼˜åŒ–
- **Tree Shaking**: ç§»é™¤æœªä½¿ç”¨çš„ä»£ç 
- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½æ¨¡å—
- **å‹ç¼©æ··æ·†**: å‡å°æ‰“åŒ…ä½“ç§¯

### ä¾èµ–ä¼˜åŒ–ç­–ç•¥
- **ç²¾ç®€ä¾èµ–**: åªå®‰è£…å¿…éœ€çš„åŒ…
- **ç»Ÿä¸€ç‰ˆæœ¬**: é¿å…å¤šä¸ªç‰ˆæœ¬çš„åŒä¸€åŒ…
- **å»¶è¿ŸåŠ è½½**: éå…³é”®ä¾èµ–å»¶è¿ŸåŠ è½½

## ğŸš¨ é£é™©ç®¡ç†

### å¸¸è§é£é™©
1. **ç‰ˆæœ¬å†²çª**: ä¸åŒåŒ…éœ€è¦åŒä¸€ä¾èµ–çš„ä¸åŒç‰ˆæœ¬
2. **å®‰å…¨æ¼æ´**: è¿‡æ—¶çš„ä¾èµ–åŒ…å«å®‰å…¨é£é™©
3. **å…¼å®¹æ€§é—®é¢˜**: æ–°ç‰ˆæœ¬ç ´åç°æœ‰åŠŸèƒ½
4. **ç»´æŠ¤ä¸­æ–­**: é¡¹ç›®åœæ­¢ç»´æŠ¤æˆ–åºŸå¼ƒ

### é£é™©ç¼“è§£
1. **ç‰ˆæœ¬é”å®š**: ä½¿ç”¨package-lock.jsoné”å®šç‰ˆæœ¬
2. **å®šæœŸå®¡è®¡**: æ¯æœˆè¿›è¡Œä¾èµ–å®‰å…¨å®¡è®¡
3. **å…¼å®¹æ€§æµ‹è¯•**: å‡çº§å‰è¿›è¡Œå…¨é¢æµ‹è¯•
4. **æ›¿ä»£æ–¹æ¡ˆ**: ä¸ºå…³é”®ä¾èµ–å‡†å¤‡å¤‡ç”¨æ–¹æ¡ˆ

## ğŸ“‹ ä¾èµ–åˆ†ç±»

### æ ¸å¿ƒè¿è¡Œæ—¶ä¾èµ–
```json
{
  "express": "4.21.2",           // Webæ¡†æ¶
  "ioredis": "4.14.0",           // Rediså®¢æˆ·ç«¯
  "jsonwebtoken": "9.0.2",       // JWTè®¤è¯
  "winston": "3.2.1",            // æ—¥å¿—ç³»ç»Ÿ
  "helmet": "8.1.0",             // å®‰å…¨ä¸­é—´ä»¶
  "cors": "2.8.5",               // è·¨åŸŸå¤„ç†
  "axios": "1.13.2"              // HTTPå®¢æˆ·ç«¯
}
```

### æµ‹è¯•ç›¸å…³ä¾èµ–
```json
{
  "jest": "^29.7.0",                    // æµ‹è¯•æ¡†æ¶
  "@testing-library/jest-dom": "^6.1.0", // DOMæµ‹è¯•å·¥å…·
  "supertest": "^4.0.2",                // APIæµ‹è¯•
  "axios-mock-adapter": "^1.22.0"       // HTTP Mock
}
```

### å¼€å‘å·¥å…·ä¾èµ–
```json
{
  "eslint": "^8.57.1",              // ä»£ç æ£€æŸ¥
  "prettier": "^3.6.2",             // ä»£ç æ ¼å¼åŒ–
  "@babel/core": "^7.28.5",         // Babelç¼–è¯‘å™¨
  "nodemon": "^2.0.22",             // å¼€å‘æœåŠ¡å™¨
  "cross-env": "^5.2.1"             // è·¨å¹³å°ç¯å¢ƒå˜é‡
}
```

## ğŸ”„ æ›´æ–°ç­–ç•¥

### è¡¥ä¸æ›´æ–° (Patch Updates)
- **é¢‘ç‡**: æ¯å‘¨æ£€æŸ¥
- **é£é™©**: ä½ï¼Œé€šå¸¸æ˜¯bugä¿®å¤
- **ç­–ç•¥**: è‡ªåŠ¨åˆå¹¶ï¼Œæ— éœ€äººå·¥å¹²é¢„

### æ¬¡ç‰ˆæœ¬æ›´æ–° (Minor Updates)
- **é¢‘ç‡**: æ¯æœˆæ£€æŸ¥
- **é£é™©**: ä¸­ç­‰ï¼Œå¯èƒ½åŒ…å«æ–°åŠŸèƒ½
- **ç­–ç•¥**: è¿è¡Œæµ‹è¯•å¥—ä»¶ï¼Œäººå·¥å®¡æŸ¥

### ä¸»ç‰ˆæœ¬æ›´æ–° (Major Updates)
- **é¢‘ç‡**: æ¯å­£åº¦æ£€æŸ¥
- **é£é™©**: é«˜ï¼Œå¯èƒ½åŒ…å«ç ´åæ€§å˜æ›´
- **ç­–ç•¥**: è¯¦ç»†çš„è¿ç§»è®¡åˆ’å’Œå…¼å®¹æ€§æµ‹è¯•

## ğŸ“ æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬ç®¡ç†
- ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
- ä¿æŒpackage-lock.jsonçš„ä¸€è‡´æ€§
- å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬

### 2. å®‰å…¨ä¼˜å…ˆ
- å®šæœŸè¿›è¡Œå®‰å…¨å®¡è®¡
- åŠæ—¶ä¿®å¤å·²çŸ¥æ¼æ´
- ç›‘æ§ä¸Šæ¸¸é¡¹ç›®çš„å®‰å…¨å…¬å‘Š

### 3. æ€§èƒ½å…³æ³¨
- ç›‘æ§åŒ…å¤§å°å˜åŒ–
- ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯
- ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–

### 4. å›¢é˜Ÿåä½œ
- å»ºç«‹ä¾èµ–æ›´æ–°æµç¨‹
- å…±äº«ä¾èµ–ç®¡ç†çŸ¥è¯†
- ç»´æŠ¤ä¾èµ–æ›´æ–°æ—¥å¿—

## ğŸ“ è”ç³»ä¸æ”¯æŒ

**ä¾èµ–ç®¡ç†ç»´æŠ¤è€…**: deps@sira-ai-gateway.com
**å®‰å…¨é—®é¢˜æŠ¥å‘Š**: security@sira-ai-gateway.com
**æŠ€æœ¯æ”¯æŒ**: dev@sira-ai-gateway.com

---

*ä¾èµ–ç®¡ç†æ˜¯ç°ä»£è½¯ä»¶å¼€å‘çš„åŸºç¡€ï¼Œè‰¯å¥½çš„ä¾èµ–ç­–ç•¥ç¡®ä¿é¡¹ç›®çš„é•¿æœŸå¥åº·å‘å±•ã€‚*
